<div id='map'>

</div>
<script type='text/javascript'>
	var map = L.mapbox.map('map')
    .addLayer(L.mapbox.tileLayer('heymath.map-ndi5v1vo', {
        detectRetina: true,
        retinaVersion: 'examples.map-zswgei2n'
    }));
    if (!navigator.geolocation) {
	    // pas de geolocalisation
	} else {
		map.locate();
	}

	// Once we've got a position, zoom and center the map
	// on it, and add a single marker.
	map.on('locationfound', function(e) {
	    map.fitBounds(e.bounds);

	    map.markerLayer.setGeoJSON({
	        type: "Feature",
	        geometry: {
	            type: "Point",
	            coordinates: [e.latlng.lng, e.latlng.lat]
	        },
	        properties: {
	            'marker-color': '#000'
	        }
	    });
	});

	console.log(map);
</script>